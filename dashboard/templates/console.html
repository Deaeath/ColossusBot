<!-- File: dashboard/templates/console.html -->

{% extends "base.html" %}

{% block content %}
<div class="console-container">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Console Logs</h2>
        <button id="toggleButton" class="btn btn-secondary">Disable Autoscroll</button>
    </div>
    <div id="consoleOutput" class="console-output border rounded p-3" style="position: relative; height: 400px; overflow-y: auto;">
        <!-- Spinner Container -->
        <div id="spinner" class="d-flex justify-content-center align-items-center spinner-overlay">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <!-- Logs Container -->
        <div id="logsContainer">
            <!-- Console logs will be dynamically inserted here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module">
    import { toggleAutoScroll, fetchConsoleLogs } from '{{ url_for("static", filename="js/scripts.js") }}';

    // Initialize log fetching and auto-scroll toggling
    const toggleBtn = document.getElementById('toggleButton');
    if (toggleBtn) {
        toggleBtn.addEventListener('click', toggleAutoScroll);
    }
    fetchConsoleLogs();
</script>
{% endblock %}

<style>
/* Add this within a <style> block or your CSS file */

.spinner-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    z-index: 1000;
    display: none; /* Hidden by default */
}

.spinner-overlay.active {
    display: flex;
}
</style>
